<div id="extralarge-modal"
     tabindex="-1"
     (click)="onBackdropClick($event)"
     [ngClass]="{ 'flex': isModalOpen, 'hidden': !isModalOpen }"
     class="fixed inset-0 z-50 flex items-center justify-center p-4 w-full h-screen bg-black bg-opacity-50">

  <div class="relative w-full max-w-7xl h-full flex items-center justify-center">
    <div class="relative bg-white rounded-lg shadow-sm w-full h-full flex flex-col">
      
      <!-- Modal header -->
      <div class="flex items-center justify-between p-4 md:p-5 border-b border-gray-200 rounded-t">
        <h3 class="cursor-default text-xl font-medium text-gray-900">
          {{ selectedProduct?.name }}
        </h3>
        <button (click)="closeModal()" type="button"
                class="text-gray-400 bg-transparent hover:bg-amber-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center">
          <svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
          </svg>
          <span class="sr-only">Close modal</span>
        </button>
      </div>

      <!-- Scrollable content -->
      <div class="flex-grow overflow-y-auto p-4 md:p-5 space-x-8 flex">
        <!-- Image Section -->
        <div class="w-3/5">
            <div class="w-full h-[700px] overflow-hidden rounded-lg">
                <img class="w-full h-full object-cover"
                    [src]="'https://localhost:5001' + selectedProduct?.imageUrl"
                    alt="{{ selectedProduct?.name }}">
            </div>
            
            <div class="mt-2 text-base leading-relaxed text-gray-500">
                <h2 class="text-xl font-semibold text-gray-600 mb-2">{{ selectedProduct?.name }}</h2>
                <p>{{ selectedProduct?.longDesc }}</p>
            </div>
        </div>


        <!-- BJU Section -->
        <div class="w-2/5 text-base leading-relaxed text-gray-500 flex flex-col">
          <h3 class="font-semibold text-gray-600 text-lg">БЖУ</h3>
          <p class="mt-3 text-lg">{{ selectedProduct?.bju }}</p>
        </div>
      </div>

      <!-- Modal footer -->
      <div class="flex items-center justify-between p-4 md:p-5 space-x-3 border-t border-gray-200 rounded-b">
        <div>
          <span class="font-semibold">Цена: </span>
          <span class="font-semibold mr-2">{{ price }} р.</span>
          <span class="font-medium text-amber-600">{{ priceType }}</span>
        </div>

        <div class="flex items-center">
          <button (click)="decreaseQuantity()" class="inline-flex items-center justify-center p-1 me-3 text-sm font-medium h-6 w-6 text-gray-500 bg-white border border-gray-300 rounded-full hover:bg-gray-100" type="button">
            <svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 2">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M1 1h16"/>
            </svg>
          </button>

          <input [(ngModel)]="quantity" (input)="updatePrice()" type="number"
                 class="bg-gray-50 w-14 border border-gray-300 text-gray-900 text-sm rounded-lg px-2.5 py-1 focus:ring-amber-500 focus:border-amber-500"
                 placeholder="{{ quantity }}" required />

          <button (click)="increaseQuantity()" class="inline-flex items-center justify-center h-6 w-6 p-1 ms-3 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-full hover:bg-gray-100" type="button">
            <svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 18">
              <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M9 1v16M1 9h16"/>
            </svg>
          </button>
        </div>

        <button (click)="addToCart()" type="button"
                class="flex items-center text-white bg-amber-500 hover:bg-amber-600 font-medium rounded-lg text-sm px-5 py-2.5">
          <svg class="w-6 h-6 text-gray-200 me-2" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24">
            <path fill-rule="evenodd"
                  d="M5 3a1 1 0 0 0 0 2h.687L7.82 15.24A3 3 0 1 0 11.83 17h2.34A3 3 0 1 0 17 15H9.813l-.208-1h8.145a1 1 0 0 0 .979-.796l1.25-6A1 1 0 0 0 19 6h-2.268A2 2 0 0 1 15 9a2 2 0 1 1-4 0 2 2 0 0 1-1.732-3h-1.33L7.48 3.796A1 1 0 0 0 6.5 3H5Z"
                  clip-rule="evenodd"/>
            <path fill-rule="evenodd"
                  d="M14 5a1 1 0 1 0-2 0v1h-1a1 1 0 1 0 0 2h1v1a1 1 0 1 0 2 0V8h1a1 1 0 1 0 0-2h-1V5Z"
                  clip-rule="evenodd"/>
          </svg>
          Добавить в корзину
        </button>
      </div>

    </div>
  </div>
</div>
